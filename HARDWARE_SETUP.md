# 硬件连接指南

## 引脚分配表

### STM32F103C8T6 引脚定义

| 功能模块 | 引脚 | STM32引脚 | 备注 |
|---------|------|-----------|------|
| **OLED显示屏 (I2C)** | | | |
| VCC | 3.3V | 3.3V | 电源正极 |
| GND | GND | GND | 电源负极 |
| SCL | PB6 | PB6 | I2C时钟线 |
| SDA | PB7 | PB7 | I2C数据线 |
| **RC522 RFID模块 (SPI)** | | | |
| VCC | 3.3V | 3.3V | 电源正极 |
| GND | GND | GND | 电源负极 |
| SCK | PA5 | PA5 | SPI时钟 |
| MOSI | PA7 | PA7 | SPI主出从入 |
| MISO | PA6 | PA6 | SPI主入从出 |
| NSS | PA4 | PA4 | SPI片选 |
| RST | PA3 | PA3 | 复位引脚 |
| **AS608指纹模块 (UART)** | | | |
| VCC | 3.3V | 3.3V | 电源正极 |
| GND | GND | GND | 电源负极 |
| TX | PA10 | PA10 | 串口接收 |
| RX | PA9 | PA9 | 串口发送 |
| **舵机控制** | | | |
| VCC | 5V | 5V | 电源正极(需要5V) |
| GND | GND | GND | 电源负极 |
| PWM | PA1 | PA1 | PWM控制信号 |
| **LED指示灯** | | | |
| LED1(红) | PA8 | PA8 | 失败指示 |
| LED2(绿) | PA9 | PA9 | 成功指示 |
| **蜂鸣器** | | | |
| 正极 | PA2 | PA2 | PWM控制 |
| 负极 | GND | GND | 电源负极 |
| **矩阵按键 4x4** | | | |
| 行1 | PB12 | PB12 | 按键行扫描 |
| 行2 | PB13 | PB13 | 按键行扫描 |
| 行3 | PB14 | PB14 | 按键行扫描 |
| 行4 | PB15 | PB15 | 按键行扫描 |
| 列1 | PB8 | PB8 | 按键列检测 |
| 列2 | PB9 | PB9 | 按键列检测 |
| 列3 | PB10 | PB10 | 按键列检测 |
| 列4 | PB11 | PB11 | 按键列检测 |
| **蓝牙模块 HC-05** | | | |
| VCC | 3.3V | 3.3V | 电源正极 |
| GND | GND | GND | 电源负极 |
| TX | PB11 | PB11 | 蓝牙发送(连接STM32接收) |
| RX | PB10 | PB10 | 蓝牙接收(连接STM32发送) |

## 连接示意图

```
                    STM32F103C8T6
                  ┌─────────────────┐
                  │                 │
    OLED ─────────┤ PB6(SCL)        │
    (I2C)         │ PB7(SDA)        │
                  │                 │
    RC522 ────────┤ PA3(RST)        │
    (SPI)         │ PA4(NSS)        │
                  │ PA5(SCK)        │
                  │ PA6(MISO)       │
                  │ PA7(MOSI)       │
                  │                 │
    AS608 ────────┤ PA9(TX)         │
    (UART)        │ PA10(RX)        │
                  │                 │
    舵机 ─────────┤ PA1(PWM)        │
                  │                 │
    LED1(红) ─────┤ PA8             │
    LED2(绿) ─────┤ PA9             │
                  │                 │
    蜂鸣器 ───────┤ PA2(PWM)        │
                  │                 │
    矩阵按键 ─────┤ PB8-PB15        │
                  │                 │
    蓝牙HC-05 ────┤ PB10(TX)        │
                  │ PB11(RX)        │
                  │                 │
                  └─────────────────┘
```

## 电源要求

### 供电规格
- **STM32F103C8**: 3.3V, 最大电流200mA
- **OLED显示屏**: 3.3V, 典型电流20mA
- **RC522模块**: 3.3V, 典型电流13-26mA
- **AS608指纹模块**: 3.3V, 工作电流<120mA
- **舵机SG90**: 5V, 工作电流100-200mA (峰值可达1A)
- **LED指示灯**: 3.3V, 每个约20mA
- **蜂鸣器**: 3.3V, 约30mA
- **HC-05蓝牙**: 3.3V, 约40mA

### 推荐电源方案
1. **USB供电**: 5V/2A USB电源适配器
2. **电源分配**: 
   - 5V直接供给舵机
   - 通过3.3V稳压器为其他模块供电
   - 建议使用AMS1117-3.3稳压芯片

## 注意事项

### ⚠️ 重要警告
1. **电源极性**: 务必确认正负极连接正确，反接可能损坏模块
2. **电压等级**: 舵机需要5V供电，其他模块使用3.3V
3. **电流容量**: 确保电源能提供足够电流，特别是舵机工作时
4. **接地共用**: 所有模块的GND必须连接到同一地线

### 🔧 连接建议
1. **使用面包板**: 初期测试建议使用面包板连接
2. **杜邦线质量**: 使用质量可靠的杜邦线，避免接触不良
3. **线路整理**: 保持连线整洁，避免信号干扰
4. **模块固定**: 确保各模块固定牢靠，避免松动

### 🧪 测试步骤
1. **分模块测试**: 先单独测试每个模块功能
2. **逐步集成**: 逐个添加模块，确保每步都正常工作
3. **电源监测**: 使用万用表监测各点电压是否正常
4. **信号检查**: 使用示波器检查关键信号波形(可选)

## 常见问题

### Q: OLED显示屏不亮
**可能原因**:
- 电源连接错误
- I2C地址不匹配
- SCL/SDA引脚接反

**解决方法**:
- 检查3.3V供电
- 确认I2C地址(通常为0x3C或0x3D)
- 交换SCL/SDA连线尝试

### Q: RFID读卡无响应
**可能原因**:
- SPI连接错误
- 电源不稳定
- 卡片距离太远

**解决方法**:
- 检查SPI四线连接
- 确认3.3V供电稳定
- 卡片贴近读卡器(2-3cm内)

### Q: 舵机不转动
**可能原因**:
- 5V供电不足
- PWM信号异常
- 舵机损坏

**解决方法**:
- 确认5V/2A供电
- 检查PWM信号线连接
- 更换舵机测试

### Q: 按键无响应
**可能原因**:
- 矩阵按键连线错误
- 按键本身故障
- 软件扫描问题

**解决方法**:
- 检查8根连线(4行4列)
- 使用万用表测试按键通断
- 检查软件按键扫描代码

## 扩展接口

### 预留引脚
以下引脚可用于功能扩展:
- **PC13**: 板载LED (可用于状态指示)
- **PC14/PC15**: 外部晶振引脚 (如不用外部晶振可作GPIO)
- **PB0/PB1**: 可用作ADC输入或GPIO

### 扩展建议
1. **温湿度传感器**: 可连接DHT22到预留GPIO
2. **SD卡模块**: 可添加用于日志存储
3. **实时时钟**: 可添加DS1302/DS3231模块
